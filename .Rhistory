.path.package()
.libPaths()
search()
searchpaths()
search()
installed.packages()
?html_nodes
library(rvest)
?html_nodes
?str_match
?read.csv
?str_match
?stringr
?stringi
options(stringsAsFactors = FALSE)
library("rvest")
library("stringr")
rm(list = ls())
equal_lengths <- function(...) {
sizes <- sapply(X = list(...), FUN = length)
return(all(rep(sizes[1], length(sizes)) == sizes))
}
url_part1 <- "https://www.immobilienscout24.de/Suche/S-T/P-"
url_part2 <- "/Wohnung-Miete/Nordrhein-Westfalen/Dortmund?pagerReporting=true"
pages <- 1:37
urls <- paste0(url_part1, pages, url_part2)
property <- data.frame(price = character(),
area = character(),
rooms = character(),
address = character())
while(length(urls) > 0) {
link <- urls[1]
print(link)
immo <- read_html(link)
price <- immo %>%
html_nodes(".result-list-entry__primary-criterion:nth-child(1) .font-line-xs") %>%
html_text()
area <- immo %>%
html_nodes(".result-list-entry__primary-criterion:nth-child(2) .font-line-xs") %>%
html_text()
rooms <- immo %>%
html_nodes(".result-list-entry__primary-criterion:nth-child(3) .font-line-xs") %>%
html_text()
# add <- immo %>%
#     html_nodes(".margin-bottom-xs") %>%
#     html_text()
address <- immo %>%
html_nodes(".nine-tenths .font-s") %>%
html_text()
if(equal_lengths(price, area, rooms, address)) {
property <- rbind(property,
data.frame(price, area, rooms, address))
urls <- urls[-1]
}
}
# clean
property$price <- str_match(string = property$price,
pattern = "\n                (.*?) €")[, 2] %>%
gsub(pattern = ",", replacement = ".") %>%
as.numeric()
property$area <- str_match(string = property$area,
pattern = "\n                (.*?) m²")[, 2] %>%
gsub(pattern = ",", replacement = ".") %>%
as.numeric()
property$rooms <- str_match(string = property$rooms,
pattern = "\n            \n              \n              \n                (.*?)\n              \n            \n            \n              Zi.\n            \n          ")[, 2] %>%
gsub(pattern = ",", replacement = ".") %>%
as.numeric()
property$part <- str_match(string = property$address,
pattern = "(?<=, )(.+?),")[, 2]
property <- property[complete.cases(property), ]
regression <- lm(formula = price ~ area + rooms + part, data = property)
summary(regression)
>lm
?lm
regression <- lm(formula = price ~ area + rooms + part, data = property)
summary(regression)
